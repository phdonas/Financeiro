
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Regra universal para coleções do usuário
    match /{collection}/{document} {
      // Permite leitura e escrita se o usuário estiver autenticado
      // O filtro por user_uid é aplicado via Query no App.tsx, 
      // mas as regras permitem o acesso para garantir que a sincronização não falhe
      allow read, write: if request.auth != null;
    }
  }
}
